# MCP Test Server - File Overview

This directory contains a minimal MCP (Model Context Protocol) test server for testing the OllamAssist tool approval system.

## Files

### Core Implementation
- **TestMcpServer.java** (515 lines)
  - Pure Java implementation of MCP server
  - No external dependencies, uses only JDK 21 classes
  - Implements JSON-RPC over STDIO transport
  - Provides two test tools: `echo` and `write_file`

### Compilation Scripts
- **compile.sh** (Linux/macOS)
  - Bash script to compile the Java server
  - Usage: `./compile.sh`

- **compile.bat** (Windows)
  - Batch script to compile the Java server
  - Usage: `compile.bat`

### Runtime Scripts
- **run.sh** (Linux/macOS)
  - Bash script to run the compiled server
  - Usage: `./run.sh`

- **run.bat** (Windows)
  - Batch script to run the compiled server
  - Usage: `run.bat`

### Testing
- **test.sh** (Linux/macOS)
  - Comprehensive test suite
  - Tests all MCP protocol methods and tools
  - Usage: `./test.sh`

### Documentation
- **README.md** (410 lines)
  - Complete documentation
  - Setup instructions
  - Tool specifications
  - MCP protocol examples
  - Troubleshooting guide

- **FILES.md** (this file)
  - Quick reference for file structure

### Build Artifacts
- **TestMcpServer.class**
  - Compiled Java bytecode (generated by compile scripts)
  - Not committed to git (see .gitignore)

### Git Configuration
- **.gitignore**
  - Excludes compiled .class files
  - Excludes log files

## Quick Start

1. **Compile**: Run `./compile.sh` (Linux/macOS) or `compile.bat` (Windows)
2. **Test**: Run `./test.sh` (Linux/macOS only)
3. **Configure**: Add to OllamAssist settings with path to `run.sh` or `run.bat`

## File Sizes

| File | Lines | Purpose |
|------|-------|---------|
| TestMcpServer.java | 515 | Server implementation |
| README.md | 410 | Documentation |
| compile.sh | ~10 | Build script (Unix) |
| compile.bat | ~10 | Build script (Windows) |
| run.sh | ~10 | Runtime script (Unix) |
| run.bat | ~10 | Runtime script (Windows) |
| test.sh | ~100 | Test suite |

## Protocol Support

This server implements MCP protocol version **2024-11-05** with the following methods:

- `initialize` - Server initialization
- `tools/list` - List available tools
- `tools/call` - Execute a tool
- `ping` - Connection test

## Tools Provided

1. **echo** - Safe tool (no side effects)
   - Returns input message as-is
   - Use for testing approval flow

2. **write_file** - Dangerous tool (has side effects)
   - Writes files to temp directory
   - Use for testing approval/denial prompts

## Dependencies

**None** - Uses only JDK 21 standard library:
- `java.io.*` - I/O operations
- `java.nio.*` - File operations
- `java.util.*` - Collections and data structures

No external libraries (Jackson, Gson, etc.) required.
